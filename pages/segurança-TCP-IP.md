# Segurança TCP / IP

O TCP / IP é amplamente utilizado em todo o mundo para fornecer comunicações de rede. As comunicações TCP / IP são compostas por quatro camadas que funcionam juntas. Quando um usuário deseja transferir dados através de redes, os dados são passados ​​da camada mais alta, através das camadas intermediárias, para a camada mais baixa, com cada camada adicionando informações. Em cada camada, as unidades lógicas são normalmente compostas por um cabeçalho e uma carga útil. A ***carga útil***  consiste nas informações transmitidas da camada anterior, enquanto o cabeçalho contém informações específicas da camada, como endereços. Na camada de aplicativo, a carga útil são os dados reais do aplicativo. A camada mais baixa envia os dados acumulados pela rede física; os dados são então transmitidos pelas camadas até seu destino. Essencialmente, os dados produzidos por uma camada são encapsulados em um contêiner maior pela camada abaixo dele. As quatro camadas TCP / IP, da mais alta à mais baixa, são mostradas abaixo.

- **Camada de aplicativo.** Essa camada envia e recebe dados para aplicativos específicos, como Domain Name System (DNS), HyperText Transfer Protocol (HTTP) e Simple Mail Transfer Protocol (SMTP).
- **Camada de transporte.** Essa camada fornece serviços orientados à conexão ou sem conexão para transportar serviços da camada de aplicativo entre redes. A camada de transporte pode, opcionalmente, garantir a confiabilidade das comunicações. Transmission Control Protocol (TCP) e User Datagram Protocol (UDP) são protocolos de camada de transporte comumente usados.
- **Camada de rede.** Esta camada roteia pacotes através de redes. O protocolo da Internet (IP) é o protocolo da camada de rede fundamental para TCP / IP. Outros protocolos comumente usados ​​na camada de rede são o Internet Control Message Protocol (ICMP) e o Internet Group Management Protocol (IGMP).
- **Camada de link.** Essa camada lida com as comunicações nos componentes físicos da rede. O protocolo de camada de enlace mais conhecido é o Ethernet.

Existem controles de segurança para comunicações de rede em cada camada do modelo TCP / IP. Conforme explicado anteriormente, os dados são passados ​​da camada mais alta para a mais baixa, com cada camada adicionando mais informações. Por causa disso, um controle de segurança em uma camada superior não pode fornecer proteção para as camadas inferiores, porque as camadas inferiores executam funções das quais as camadas superiores não estão cientes. Os controles de segurança disponíveis em cada camada incluem:

- **Camada de aplicativo.** Devem ser estabelecidos controles separados para cada aplicação. Por exemplo, se um aplicativo precisa proteger dados confidenciais enviados através de redes, o aplicativo pode precisar ser modificado para fornecer essa proteção. Embora isso forneça um alto grau de controle e flexibilidade sobre a segurança do aplicativo, pode exigir um grande investimento de recursos para adicionar e configurar os controles adequadamente para cada aplicativo. Projetar um protocolo de aplicativo criptograficamente sólido é muito difícil e implementá-lo adequadamente é ainda mais desafiador, portanto, criar novos controles de segurança da camada de aplicativo provavelmente criará vulnerabilidades. Além disso, alguns aplicativos, particularmente softwares de prateleira, podem não ser capazes de fornecer tal proteção. Embora os controles da camada de aplicativo possam proteger os dados do aplicativo, eles não podem proteger as informações TCP / IP, como endereços IP, porque essas informações existem em uma camada inferior. Sempre que possível, os controles da camada de aplicativo para proteger as comunicações de rede devem ser soluções baseadas em padrões que já estão em uso há algum tempo. Um exemplo é o Secure Multipurpose Internet Mail Extensions (S / MIME), comumente usado para criptografar mensagens de e-mail.
- **Camada de transporte.** Os controles nesta camada podem ser usados ​​para proteger os dados em uma única sessão de comunicação entre dois hosts. Como as informações de IP são adicionadas à camada de rede, os controles da camada de transporte não podem protegê-las. O uso mais comum dos protocolos da camada de transporte é proteger o tráfego HTTP; o protocolo Transport Layer Security (TLS) é geralmente usado para isso. (TLS é a versão baseada em padrões do SSL versão 3. Mais informações sobre TLS estão disponíveis em RFC 4346, [The TLS Protocol Version 1.1](https://www.ietf.org/rfc/rfc4346.txt). Outra boa fonte das informações é NIST SP 800-52, [Diretrizes sobre a Seleção e Uso de Segurança da Camada de Transporte](https://csrc.nist.gov/publications/nistpubs/) ) O uso de TLS normalmente requer que cada aplicativo suporte TLS; no entanto, ao contrário dos controles da camada de aplicativo, que normalmente envolvem ampla personalização do aplicativo, os controles da camada de transporte, como TLS, são muito menos invasivos porque não precisam entender as funções ou características do aplicativo. Embora o uso de TLS possa exigir a modificação de alguns aplicativos, o TLS é um protocolo bem testado que possui várias implementações que foram adicionadas a muitos aplicativos, portanto, é uma opção de risco relativamente baixo em comparação com a adição de proteção na camada de aplicativo. Tradicionalmente, o TLS tem sido usado para proteger as comunicações baseadas em HTTP e pode ser usado com VPNs de portal SSL.
- **Camada de rede.** Os controles nesta camada podem ser aplicados a todos os aplicativos; portanto, eles não são específicos do aplicativo. Por exemplo, todas as comunicações de rede entre dois hosts ou redes podem ser protegidas nesta camada sem modificar nenhum aplicativo nos clientes ou servidores. Em alguns ambientes, os controles de camada de rede, como Internet Protocol Security (IPsec), fornecem uma solução muito melhor do que os controles de camada de transporte ou de aplicativo, devido às dificuldades em adicionar controles a aplicativos individuais. Os controles da camada de rede também fornecem uma maneira para que os administradores de rede apliquem certas políticas de segurança. Outra vantagem dos controles da camada de rede é que, uma vez que as informações IP (por exemplo, endereços IP) são adicionadas a essa camada, os controles podem proteger os dados dentro dos pacotes e as informações IP de cada pacote. Contudo, os controles da camada de rede fornecem menos controle e flexibilidade para proteger aplicativos específicos do que os controles da camada de transporte e aplicativo. As VPNs de túnel SSL fornecem a capacidade de proteger as comunicações TCP e UDP, incluindo cliente / servidor e outro tráfego de rede e, portanto, atuam como VPNs da camada de rede.
- **Camada de link.** Os controles da camada de link são aplicados a todas as comunicações em um link físico específico, como um circuito dedicado entre dois prédios ou uma conexão de modem dial-up para um provedor de serviços de Internet (ISP). Os controles da camada de link para circuitos dedicados são mais frequentemente fornecidos por dispositivos de hardware especializados conhecidos como ***criptografadores de link de dados***; os controles da camada de enlace de dados para outros tipos de conexões, como comunicações de modem dial-up, geralmente são fornecidos por meio de software. Como a camada de link está abaixo da camada de rede, os controles nessa camada podem proteger os dados e as informações de IP. Em comparação com os controles nas outras camadas, os controles da camada de link são relativamente simples, o que os torna mais fáceis de implementar; além disso, eles suportam outros protocolos de camada de rede além do IP. Como os controles da camada de link são específicos para um link físico específico, eles não podem proteger conexões com vários links, como estabelecer uma VPN pela Internet. Uma conexão baseada na Internet é normalmente composta de vários links físicos encadeados; proteger tal conexão com controles de camada de link exigiria a implantação de um controle separado para cada link, o que não é viável.

Como eles podem fornecer proteção para muitos aplicativos ao mesmo tempo, sem modificá-los, os controles de segurança da camada de rede têm sido usados ​​com frequência para proteger as comunicações, especialmente em redes compartilhadas como a Internet. Os controles de segurança da camada de rede fornecem uma solução única para proteger os dados de todos os aplicativos, bem como proteger as informações de IP. No entanto, em muitos casos, os controles em outra camada são mais adequados para fornecer proteção do que os controles da camada de rede. Por exemplo, se apenas um ou dois aplicativos precisam de proteção, um controle de camada de rede pode ser excessivo. Os protocolos da camada de transporte, como SSL, são mais comumente usados ​​para fornecer segurança para comunicações com aplicativos individuais baseados em HTTP, embora também sejam usados ​​para fornecer proteção para sessões de comunicação de outros tipos de aplicativos, como SMTP, Ponto de Presença (POP), Internet Message Access Protocol (IMAP) e File Transfer Protocol (FTP). Como todos os principais navegadores da Web incluem suporte para TLS, os usuários que desejam usar aplicativos baseados na Web protegidos por TLS normalmente não precisam instalar nenhum software cliente ou reconfigurar seus sistemas. Os aplicativos mais recentes de protocolos de segurança da camada de transporte protegem as comunicações de aplicativos HTTP e não HTTP, incluindo aplicativos cliente / servidor e outro tráfego de rede. Os controles em cada camada oferecem vantagens e recursos que os controles em outras camadas não oferecem. Como todos os principais navegadores da Web incluem suporte para TLS, os usuários que desejam usar aplicativos baseados na Web protegidos por TLS normalmente não precisam instalar nenhum software cliente ou reconfigurar seus sistemas. Os aplicativos mais recentes de protocolos de segurança da camada de transporte protegem as comunicações de aplicativos HTTP e não HTTP, incluindo aplicativos cliente / servidor e outro tráfego de rede. Os controles em cada camada oferecem vantagens e recursos que os controles em outras camadas não oferecem. Como todos os principais navegadores da Web incluem suporte para TLS, os usuários que desejam usar aplicativos baseados na Web protegidos por TLS normalmente não precisam instalar nenhum software cliente ou reconfigurar seus sistemas. Os aplicativos mais recentes de protocolos de segurança da camada de transporte protegem as comunicações de aplicativos HTTP e não HTTP, incluindo aplicativos cliente / servidor e outro tráfego de rede. Os controles em cada camada oferecem vantagens e recursos que os controles em outras camadas não oferecem.

SSL é o controle de segurança da camada de transporte mais comumente usado. Dependendo de como o SSL é implementado e configurado, ele pode fornecer qualquer combinação dos seguintes tipos de proteção:

- **Confidencialidade.** SSL pode garantir que os dados não possam ser lidos por terceiros não autorizados. Isso é feito criptografando dados usando um algoritmo criptográfico e uma chave secreta - um valor conhecido apenas pelas duas partes que trocam dados. Os dados só podem ser descriptografados por alguém que tenha a chave secreta.
- **Integridade.** SSL pode determinar se os dados foram alterados (intencionalmente ou não) durante o trânsito. A integridade dos dados pode ser garantida gerando um valor de código de autenticação de mensagem (MAC), que é uma soma de verificação criptográfica com chave dos dados. Se os dados forem alterados e o MAC for recalculado, o antigo e o novo MAC serão diferentes.
- **Autenticação de pares.** Cada terminal SSL pode confirmar a identidade do outro terminal SSL com o qual deseja se comunicar, garantindo que o tráfego de rede e os dados estejam sendo enviados do host esperado. A autenticação SSL é normalmente executada unilateralmente, autenticando o servidor para o cliente, mas pode ser executada mutuamente.
- **Proteção de reprodução.** Os mesmos dados não são entregues várias vezes e os dados não são entregues totalmente fora de ordem.

## Referência

[TCP/IP Security - MDN](https://developer.mozilla.org/en-US/docs/Archive/Security/TCP_IP)